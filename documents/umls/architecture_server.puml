@startuml
title Architecture Server

rectangle "BananaTransfer Server" as srv {
    rectangle "Node.js" as node {
        rectangle "Frontend \n(pug templates)" as frontend
        rectangle "Backend /api \n(NestJS)" as backend {
            rectangle "auth module \n(user authentication)" as auth {
              rectangle "jwt core module \n(jwt creation and validation)" as jwt
            }
            rectangle "database module \n(access to db)" as db_mod
            rectangle "transfer module \n(create and access transfers for users)" as transfer
            rectangle "remote controller \n(api for communication with other servers)" as remote
            rectangle "user module \n(manage user account / keys)" as usr
        }
    }
    rectangle "Database \nPostgreSQL" as db
    rectangle "Bucket \nS3 / MinIO" as s3
}
rectangle "Other Server" as srv2
remote <--> transfer
remote <--> usr
transfer --> db_mod
transfer --> usr
auth --> usr
remote <-right->srv2
usr --> db_mod
db_mod -down-> db: "query/save"
transfer -down-> s3: "fetch/save"


@enduml